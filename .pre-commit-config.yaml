# Pre-commit hooks configuration
# Install with: uv pip install pre-commit && uv run pre-commit install
# Run manually: uv run pre-commit run --all-files

# Global excludes - artifacts and contrib contain generated/external code
exclude: ^(artifacts/|contrib/)

repos:
  # Ruff - Fast Python linter and formatter (replaces Black, isort, Pylint)
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.8.1
    hooks:
      # Ruff formatter (replaces Black + isort)
      - id: ruff-format
        args: ['--config=pyproject.toml']
      # Ruff linter (replaces Pylint, Flake8)
      - id: ruff
        args: ['--fix', '--config=pyproject.toml']

  # Zizmor - GitHub Actions security linter
  - repo: https://github.com/zizmorcore/zizmor-pre-commit
    rev: v1.18.0
    hooks:
      - id: zizmor

  # ty - Astral's Python type checker (extremely fast, written in Rust)
  # No official pre-commit repo yet (https://github.com/astral-sh/ty/issues/269)
  # Using local hook until official release
  # Non-blocking (informational) during alpha - remove "|| true" when ready to enforce
  - repo: local
    hooks:
      - id: ty
        name: ty (type checker - informational)
        entry: bash -c 'uv run ty check || true'
        language: system
        types: [python]
        pass_filenames: false
        verbose: true

  # Additional useful hooks
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v5.0.0
    hooks:
      - id: trailing-whitespace
      - id: end-of-file-fixer
      - id: check-yaml
        exclude: mkdocs.yml  # Uses Python-specific YAML tags
      - id: check-added-large-files
      - id: check-merge-conflict
      - id: debug-statements
