{
  "task_id": "HW-001",
  "api_contracts": [
    {
      "endpoint": "/hello",
      "method": "GET",
      "description": "Returns a greeting message. If a name query parameter is provided, greets that person; otherwise greets the world.",
      "request_schema": null,
      "request_params": {
        "name": "string (optional, max 255 characters, alphanumeric and spaces only)"
      },
      "response_schema": {
        "message": "string (greeting message in format 'Hello, {name}!' or 'Hello, World!')"
      },
      "error_responses": [
        {
          "status": 400,
          "code": "INVALID_NAME_PARAMETER",
          "message": "Name parameter contains invalid characters. Only alphanumeric characters and spaces are allowed."
        },
        {
          "status": 400,
          "code": "NAME_TOO_LONG",
          "message": "Name parameter exceeds maximum length of 255 characters."
        },
        {
          "status": 500,
          "code": "INTERNAL_SERVER_ERROR",
          "message": "An unexpected error occurred while processing the request."
        }
      ],
      "authentication_required": false,
      "rate_limit": null
    },
    {
      "endpoint": "/health",
      "method": "GET",
      "description": "Returns the health status of the API with the current server timestamp.",
      "request_schema": null,
      "request_params": null,
      "response_schema": {
        "status": "string (always 'ok' for healthy state)",
        "timestamp": "string (ISO 8601 formatted UTC timestamp)"
      },
      "error_responses": [
        {
          "status": 500,
          "code": "INTERNAL_SERVER_ERROR",
          "message": "An unexpected error occurred while processing the request."
        }
      ],
      "authentication_required": false,
      "rate_limit": null
    }
  ],
  "data_schemas": [],
  "component_logic": [
    {
      "component_name": "FastAPIApplicationFactory",
      "semantic_unit_id": "SU-001",
      "responsibility": "Initializes and configures the FastAPI application with middleware, exception handlers, and core settings.",
      "interfaces": [
        {
          "method": "create_app",
          "parameters": {},
          "returns": "FastAPI",
          "description": "Create and configure FastAPI application instance with all middleware and exception handlers"
        },
        {
          "method": "setup_exception_handlers",
          "parameters": {
            "app": "FastAPI"
          },
          "returns": "None",
          "description": "Register global exception handlers for the application"
        }
      ],
      "dependencies": [],
      "implementation_notes": "Use FastAPI 0.104+ for application creation. Set title='Hello World API', version='1.0.0', description='Minimal REST API with hello and health endpoints'. Configure CORS if needed (allow all origins for simplicity). Register exception handlers in setup_exception_handlers method. Use dependency injection for request validation.",
      "complexity": 11
    },
    {
      "component_name": "HelloEndpointHandler",
      "semantic_unit_id": "SU-002",
      "responsibility": "Handles GET /hello requests with optional name parameter and returns personalized greeting message.",
      "interfaces": [
        {
          "method": "get_hello",
          "parameters": {
            "name": "Optional[str]"
          },
          "returns": "dict[str, str]",
          "description": "Process hello request with optional name and return greeting message"
        },
        {
          "method": "validate_name",
          "parameters": {
            "name": "str"
          },
          "returns": "bool",
          "description": "Validate name parameter contains only alphanumeric characters and spaces"
        },
        {
          "method": "format_greeting",
          "parameters": {
            "name": "Optional[str]"
          },
          "returns": "str",
          "description": "Format greeting message based on provided name or default to World"
        }
      ],
      "dependencies": [
        "FastAPIApplicationFactory"
      ],
      "implementation_notes": "Use FastAPI Query parameter with default=None for optional name. Validate name using regex pattern '^[a-zA-Z0-9 ]*$' to allow only alphanumeric and spaces. Check length <= 255 characters. Raise HTTPException(status_code=400, detail=...) for validation failures. Return dict with 'message' key. Handle None name by returning 'Hello, World!'. Strip whitespace from name input.",
      "complexity": 24
    },
    {
      "component_name": "HealthEndpointHandler",
      "semantic_unit_id": "SU-003",
      "responsibility": "Handles GET /health requests and returns API health status with current UTC timestamp.",
      "interfaces": [
        {
          "method": "get_health",
          "parameters": {},
          "returns": "dict[str, str]",
          "description": "Return health status and current timestamp in ISO 8601 format"
        },
        {
          "method": "get_current_timestamp",
          "parameters": {},
          "returns": "str",
          "description": "Generate current UTC timestamp in ISO 8601 format"
        }
      ],
      "dependencies": [
        "FastAPIApplicationFactory"
      ],
      "implementation_notes": "Use datetime.datetime.utcnow() or datetime.datetime.now(datetime.timezone.utc) to get current time. Format timestamp using isoformat() method to produce ISO 8601 format (e.g., '2024-01-15T10:30:45.123456+00:00'). Always return status='ok'. Return dict with 'status' and 'timestamp' keys. No validation needed for this endpoint.",
      "complexity": 17
    },
    {
      "component_name": "GlobalErrorHandler",
      "semantic_unit_id": "SU-004",
      "responsibility": "Manages global exception handling and HTTP status code responses for all API errors.",
      "interfaces": [
        {
          "method": "handle_http_exception",
          "parameters": {
            "request": "Request",
            "exc": "HTTPException"
          },
          "returns": "JSONResponse",
          "description": "Handle HTTPException and return formatted error response"
        },
        {
          "method": "handle_validation_error",
          "parameters": {
            "request": "Request",
            "exc": "RequestValidationError"
          },
          "returns": "JSONResponse",
          "description": "Handle request validation errors and return 400 response"
        },
        {
          "method": "handle_generic_exception",
          "parameters": {
            "request": "Request",
            "exc": "Exception"
          },
          "returns": "JSONResponse",
          "description": "Handle unexpected exceptions and return 500 response"
        },
        {
          "method": "format_error_response",
          "parameters": {
            "status_code": "int",
            "error_code": "str",
            "message": "str"
          },
          "returns": "dict[str, any]",
          "description": "Format error response with consistent structure"
        }
      ],
      "dependencies": [],
      "implementation_notes": "Register exception handlers using @app.exception_handler(ExceptionType) decorator. For HTTPException: extract status_code and detail, return JSONResponse with status_code. For RequestValidationError: return 400 with error_code='VALIDATION_ERROR'. For generic Exception: log error, return 500 with error_code='INTERNAL_SERVER_ERROR'. Error response format: {\"error\": {\"code\": \"ERROR_CODE\", \"message\": \"error message\"}}. Always include status_code in JSONResponse.",
      "complexity": 22
    },
    {
      "component_name": "ApplicationEntryPoint",
      "semantic_unit_id": "SU-005",
      "responsibility": "Provides the main entry point for running the FastAPI application with server configuration and startup validation.",
      "interfaces": [
        {
          "method": "main",
          "parameters": {},
          "returns": "None",
          "description": "Entry point function to start the FastAPI server"
        },
        {
          "method": "validate_startup",
          "parameters": {
            "app": "FastAPI"
          },
          "returns": "bool",
          "description": "Validate application configuration before startup"
        },
        {
          "method": "run_server",
          "parameters": {
            "app": "FastAPI",
            "host": "str",
            "port": "int"
          },
          "returns": "None",
          "description": "Start uvicorn server with specified configuration"
        }
      ],
      "dependencies": [
        "FastAPIApplicationFactory",
        "HelloEndpointHandler",
        "HealthEndpointHandler",
        "GlobalErrorHandler"
      ],
      "implementation_notes": "Use uvicorn.run() to start server with host='0.0.0.0', port=8000, reload=False for production. Create app using FastAPIApplicationFactory.create_app(). Validate that both /hello and /health routes are registered. Log startup message with server URL. Handle KeyboardInterrupt gracefully. Use if __name__ == '__main__': pattern for entry point. Set log_level='info' for uvicorn.",
      "complexity": 15
    }
  ],
  "design_review_checklist": [
    {
      "category": "Architecture",
      "description": "Verify all semantic units from project plan have corresponding components",
      "validation_criteria": "All 5 semantic units (SU-001 through SU-005) must have at least one component in component_logic. SU-001 maps to FastAPIApplicationFactory, SU-002 to HelloEndpointHandler, SU-003 to HealthEndpointHandler, SU-004 to GlobalErrorHandler, SU-005 to ApplicationEntryPoint.",
      "severity": "Critical"
    },
    {
      "category": "Error Handling",
      "description": "Verify all error cases have appropriate HTTP status codes and error responses",
      "validation_criteria": "GET /hello must return 400 for invalid name parameter and 400 for name exceeding 255 characters. Both endpoints must return 500 for internal errors. Error responses must include error code and message fields. GlobalErrorHandler must catch HTTPException, RequestValidationError, and generic Exception.",
      "severity": "Critical"
    },
    {
      "category": "Security",
      "description": "Verify input validation prevents injection attacks and malformed data",
      "validation_criteria": "HelloEndpointHandler.validate_name() must use regex pattern '^[a-zA-Z0-9 ]*$' to restrict name parameter. Name length must be validated to not exceed 255 characters. Invalid input must raise HTTPException with 400 status code.",
      "severity": "High"
    },
    {
      "category": "Performance",
      "description": "Verify endpoints return responses efficiently without unnecessary processing",
      "validation_criteria": "GET /hello must complete in < 10ms. GET /health must complete in < 10ms. No database calls or external API calls. Timestamp generation must use standard library datetime module.",
      "severity": "Medium"
    },
    {
      "category": "Data Integrity",
      "description": "Verify response schemas match API contract specifications exactly",
      "validation_criteria": "GET /hello response must contain only 'message' key with string value. GET /health response must contain 'status' (always 'ok') and 'timestamp' (ISO 8601 format) keys. All responses must be valid JSON.",
      "severity": "High"
    },
    {
      "category": "REST Compliance",
      "description": "Verify API follows REST best practices and HTTP standards",
      "validation_criteria": "GET requests must not modify state. Endpoints must use appropriate HTTP status codes (200 for success, 400 for client errors, 500 for server errors). All responses must use JSON content-type. No query parameters in POST/PUT/DELETE requests.",
      "severity": "Medium"
    }
  ],
  "architecture_overview": "The Hello World API is a minimal 3-layer FastAPI application. The ApplicationEntryPoint (SU-005) initializes and starts the server using FastAPIApplicationFactory (SU-001). The factory sets up the FastAPI app with global error handling via GlobalErrorHandler (SU-004). Two endpoint handlers process requests: HelloEndpointHandler (SU-002) handles GET /hello with optional name parameter validation and personalized greeting logic, and HealthEndpointHandler (SU-003) handles GET /health with timestamp generation. All errors are caught by GlobalErrorHandler which returns consistent JSON error responses with appropriate HTTP status codes. No database or external dependencies are required.",
  "technology_stack": {
    "language": "Python 3.12",
    "web_framework": "FastAPI 0.104.1",
    "asgi_server": "uvicorn 0.24.0",
    "datetime_handling": "Python standard library datetime module",
    "validation": "Pydantic v2 (included with FastAPI)",
    "http_client": "httpx (for testing, optional)"
  },
  "assumptions": [
    "FastAPI and uvicorn are installed as project dependencies",
    "Application runs on localhost:8000 by default",
    "All timestamps are in UTC timezone",
    "Name parameter accepts only alphanumeric characters and spaces (no special characters)",
    "No authentication or authorization is required for either endpoint",
    "No database or persistent storage is needed",
    "CORS is not required (single-origin API)",
    "Request/response logging is handled by uvicorn default logging",
    "Application is stateless with no session management",
    "ISO 8601 timestamp format includes timezone information"
  ],
  "timestamp": "2025-12-11T18:59:26.627266"
}