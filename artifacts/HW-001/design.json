{
  "task_id": "HW-001",
  "api_contracts": [
    {
      "endpoint": "/hello",
      "method": "GET",
      "description": "Returns a greeting message. If a name query parameter is provided, greets that person; otherwise greets the world.",
      "request_schema": null,
      "request_params": {
        "name": "string (optional, max 255 characters, alphanumeric and spaces only)"
      },
      "response_schema": {
        "message": "string (format: 'Hello, {name}!' or 'Hello, World!')"
      },
      "error_responses": [
        {
          "status": 400,
          "code": "INVALID_NAME_PARAMETER",
          "message": "Name parameter contains invalid characters. Only alphanumeric characters and spaces are allowed."
        },
        {
          "status": 400,
          "code": "NAME_TOO_LONG",
          "message": "Name parameter exceeds maximum length of 255 characters."
        },
        {
          "status": 500,
          "code": "INTERNAL_SERVER_ERROR",
          "message": "An unexpected error occurred while processing the request."
        }
      ],
      "authentication_required": false,
      "rate_limit": null
    },
    {
      "endpoint": "/health",
      "method": "GET",
      "description": "Returns the health status of the API with the current server timestamp.",
      "request_schema": null,
      "request_params": null,
      "response_schema": {
        "status": "string (value: 'ok')",
        "timestamp": "string (ISO 8601 format, UTC timezone)"
      },
      "error_responses": [
        {
          "status": 500,
          "code": "INTERNAL_SERVER_ERROR",
          "message": "An unexpected error occurred while processing the request."
        }
      ],
      "authentication_required": false,
      "rate_limit": null
    }
  ],
  "data_schemas": [],
  "component_logic": [
    {
      "component_name": "FastAPIApplicationFactory",
      "semantic_unit_id": "SU-001",
      "responsibility": "Initializes and configures the FastAPI application with middleware, exception handlers, and startup configuration.",
      "interfaces": [
        {
          "method": "create_app",
          "parameters": {},
          "returns": "FastAPI",
          "description": "Create and configure FastAPI application instance with all middleware and exception handlers"
        },
        {
          "method": "setup_exception_handlers",
          "parameters": {
            "app": "FastAPI"
          },
          "returns": "None",
          "description": "Register global exception handlers for the application"
        }
      ],
      "dependencies": [],
      "implementation_notes": "Use FastAPI 0.104+ with Starlette. Configure CORS middleware if needed. Set up logging configuration. Initialize application with title='Hello World API', version='1.0.0', description='Minimal REST API with hello and health endpoints'. Register exception handlers in setup_exception_handlers method. Use uvicorn for ASGI server.",
      "complexity": 11
    },
    {
      "component_name": "HelloEndpointHandler",
      "semantic_unit_id": "SU-002",
      "responsibility": "Handles GET /hello requests with optional name parameter and returns personalized greeting message.",
      "interfaces": [
        {
          "method": "hello",
          "parameters": {
            "name": "Optional[str]"
          },
          "returns": "dict[str, str]",
          "description": "Process hello request with optional name parameter and return greeting message"
        },
        {
          "method": "validate_name",
          "parameters": {
            "name": "str"
          },
          "returns": "bool",
          "description": "Validate name parameter: max 255 chars, alphanumeric and spaces only"
        },
        {
          "method": "format_greeting",
          "parameters": {
            "name": "Optional[str]"
          },
          "returns": "str",
          "description": "Format greeting message based on provided name"
        }
      ],
      "dependencies": [],
      "implementation_notes": "Use FastAPI @app.get('/hello') decorator. Accept name as Query parameter with default None. Validate name using regex pattern '^[a-zA-Z0-9 ]*$' if provided. Raise HTTPException(status_code=400, detail='INVALID_NAME_PARAMETER') for invalid characters. Raise HTTPException(status_code=400, detail='NAME_TOO_LONG') if length > 255. Return dict with 'message' key. If name is None or empty string, return 'Hello, World!'. Otherwise return 'Hello, {name}!' with name stripped of leading/trailing whitespace.",
      "complexity": 24
    },
    {
      "component_name": "HealthEndpointHandler",
      "semantic_unit_id": "SU-003",
      "responsibility": "Handles GET /health requests and returns API health status with current UTC timestamp.",
      "interfaces": [
        {
          "method": "health",
          "parameters": {},
          "returns": "dict[str, str]",
          "description": "Process health check request and return status with timestamp"
        },
        {
          "method": "get_current_timestamp",
          "parameters": {},
          "returns": "str",
          "description": "Get current UTC timestamp in ISO 8601 format"
        }
      ],
      "dependencies": [],
      "implementation_notes": "Use FastAPI @app.get('/health') decorator. Use datetime.datetime.utcnow() or datetime.datetime.now(datetime.timezone.utc) to get current time. Format timestamp as ISO 8601 string using .isoformat() method. Return dict with 'status' key set to 'ok' and 'timestamp' key with ISO 8601 formatted timestamp. Ensure timezone is UTC (append 'Z' or '+00:00' to ISO string).",
      "complexity": 21
    },
    {
      "component_name": "GlobalExceptionHandler",
      "semantic_unit_id": "SU-004",
      "responsibility": "Handles all exceptions globally and returns properly formatted error responses with appropriate HTTP status codes.",
      "interfaces": [
        {
          "method": "http_exception_handler",
          "parameters": {
            "request": "Request",
            "exc": "HTTPException"
          },
          "returns": "JSONResponse",
          "description": "Handle HTTPException and return formatted error response"
        },
        {
          "method": "validation_exception_handler",
          "parameters": {
            "request": "Request",
            "exc": "RequestValidationError"
          },
          "returns": "JSONResponse",
          "description": "Handle request validation errors and return 400 response"
        },
        {
          "method": "generic_exception_handler",
          "parameters": {
            "request": "Request",
            "exc": "Exception"
          },
          "returns": "JSONResponse",
          "description": "Handle unexpected exceptions and return 500 response"
        }
      ],
      "dependencies": [],
      "implementation_notes": "Register exception handlers using @app.exception_handler(ExceptionType) decorator. For HTTPException: return JSONResponse with status_code from exception and detail from exception. For RequestValidationError: return JSONResponse with status_code=400 and error details. For generic Exception: log error with logging.error(), return JSONResponse with status_code=500 and generic error message 'INTERNAL_SERVER_ERROR'. All error responses must include 'code' and 'message' fields. Never expose internal error details to client. Use logging.getLogger(__name__) for error logging.",
      "complexity": 27
    }
  ],
  "design_review_checklist": [
    {
      "category": "Architecture",
      "description": "Verify all semantic units from project plan have corresponding components",
      "validation_criteria": "All four semantic units (SU-001, SU-002, SU-003, SU-004) must have at least one component in component_logic. SU-001 maps to FastAPIApplicationFactory, SU-002 to HelloEndpointHandler, SU-003 to HealthEndpointHandler, SU-004 to GlobalExceptionHandler.",
      "severity": "Critical"
    },
    {
      "category": "Error Handling",
      "description": "Verify all error cases are handled with appropriate HTTP status codes",
      "validation_criteria": "HelloEndpointHandler must return 400 for invalid name characters and 400 for name too long. HealthEndpointHandler must not raise errors under normal conditions. GlobalExceptionHandler must catch HTTPException, RequestValidationError, and generic Exception. All error responses must include 'code' and 'message' fields.",
      "severity": "Critical"
    },
    {
      "category": "Security",
      "description": "Verify input validation prevents injection attacks and malformed data",
      "validation_criteria": "HelloEndpointHandler.validate_name must use regex pattern '^[a-zA-Z0-9 ]*$' to restrict name parameter. Name parameter must be limited to 255 characters maximum. No user input should be directly interpolated into responses without validation.",
      "severity": "High"
    },
    {
      "category": "Performance",
      "description": "Verify endpoints return responses efficiently without unnecessary processing",
      "validation_criteria": "HelloEndpointHandler must complete in < 10ms. HealthEndpointHandler must complete in < 5ms. No database calls or external API calls in either endpoint. Timestamp generation must use efficient datetime operations.",
      "severity": "Medium"
    },
    {
      "category": "Data Integrity",
      "description": "Verify response formats match API contract specifications exactly",
      "validation_criteria": "HelloEndpointHandler must return JSON with exactly one key 'message' containing string value. HealthEndpointHandler must return JSON with exactly two keys: 'status' (value 'ok') and 'timestamp' (ISO 8601 UTC format). All responses must be valid JSON.",
      "severity": "High"
    },
    {
      "category": "Error Handling",
      "description": "Verify error responses do not expose internal implementation details",
      "validation_criteria": "Generic exceptions must return status 500 with message 'INTERNAL_SERVER_ERROR' without stack traces or internal error details. Logging must capture full error details server-side but client response must be generic.",
      "severity": "High"
    }
  ],
  "architecture_overview": "Simple single-tier REST API architecture using FastAPI framework. Application consists of four main components: (1) FastAPIApplicationFactory initializes the FastAPI application with middleware and exception handlers, (2) HelloEndpointHandler processes GET /hello requests with optional name parameter validation and personalized greeting logic, (3) HealthEndpointHandler processes GET /health requests and returns status with current UTC timestamp, (4) GlobalExceptionHandler provides centralized error handling for all exceptions with appropriate HTTP status codes and formatted error responses. No database layer, no external dependencies beyond FastAPI and standard library. All responses are JSON formatted. Error handling is comprehensive with validation for input parameters and graceful handling of unexpected errors.",
  "technology_stack": {
    "language": "Python 3.12",
    "framework": "FastAPI 0.104.1",
    "asgi_server": "uvicorn 0.24.0",
    "http_client": "httpx (for testing)",
    "datetime_handling": "Python datetime module (stdlib)",
    "validation": "Pydantic v2 (included with FastAPI)",
    "logging": "Python logging module (stdlib)"
  },
  "assumptions": [
    "FastAPI 0.104+ is available with Starlette ASGI support",
    "Application runs on Python 3.12 with standard library modules available",
    "Server timezone is UTC or timestamps will be explicitly converted to UTC",
    "Name parameter validation uses only alphanumeric characters and spaces (no special characters, unicode, or emojis)",
    "No authentication or authorization is required for either endpoint",
    "No rate limiting is implemented at application level (can be added at infrastructure/gateway level if needed)",
    "Application runs on a single instance (no distributed deployment considerations)",
    "HTTP status codes follow REST conventions: 200 for success, 400 for client errors, 500 for server errors",
    "All responses are JSON formatted with UTF-8 encoding",
    "Error responses include both 'code' and 'message' fields for client-side error handling"
  ],
  "timestamp": "2025-11-27T02:26:24.794021"
}