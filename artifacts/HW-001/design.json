{
  "task_id": "HW-001",
  "api_contracts": [
    {
      "endpoint": "/hello",
      "method": "GET",
      "description": "Returns a greeting message. If a name query parameter is provided, greets that person; otherwise greets the world.",
      "request_schema": null,
      "request_params": {
        "name": "string (optional, max 255 characters, alphanumeric and spaces only)"
      },
      "response_schema": {
        "message": "string (format: 'Hello, {name}!' or 'Hello, World!')"
      },
      "error_responses": [
        {
          "status": 400,
          "code": "INVALID_NAME_PARAMETER",
          "message": "Name parameter contains invalid characters. Only alphanumeric characters and spaces are allowed."
        },
        {
          "status": 400,
          "code": "NAME_TOO_LONG",
          "message": "Name parameter exceeds maximum length of 255 characters."
        },
        {
          "status": 500,
          "code": "INTERNAL_SERVER_ERROR",
          "message": "An unexpected error occurred while processing the request."
        }
      ],
      "authentication_required": false,
      "rate_limit": null
    },
    {
      "endpoint": "/health",
      "method": "GET",
      "description": "Returns the health status of the API with the current server timestamp.",
      "request_schema": null,
      "request_params": null,
      "response_schema": {
        "status": "string (value: 'ok')",
        "timestamp": "string (ISO 8601 format, UTC timezone)"
      },
      "error_responses": [
        {
          "status": 500,
          "code": "INTERNAL_SERVER_ERROR",
          "message": "An unexpected error occurred while processing the request."
        }
      ],
      "authentication_required": false,
      "rate_limit": null
    }
  ],
  "data_schemas": [],
  "component_logic": [
    {
      "component_name": "FastAPIApplicationFactory",
      "semantic_unit_id": "SU-001",
      "responsibility": "Initializes and configures the FastAPI application with middleware, exception handlers, and startup configuration.",
      "interfaces": [
        {
          "method": "create_app",
          "parameters": {},
          "returns": "FastAPI",
          "description": "Create and configure FastAPI application instance with all middleware and exception handlers"
        },
        {
          "method": "setup_exception_handlers",
          "parameters": {
            "app": "FastAPI"
          },
          "returns": "None",
          "description": "Register global exception handlers for the application"
        }
      ],
      "dependencies": [],
      "implementation_notes": "Use FastAPI 0.104+ with Uvicorn ASGI server. Set title='Hello World API', version='1.0.0', description='Minimal REST API with hello and health endpoints'. Configure JSON response encoding with ensure_ascii=False. Add CORS middleware with allow_origins=['*'] for development. Set up exception handlers in setup_exception_handlers() method. Use dependency injection for request validation.",
      "complexity": 11
    },
    {
      "component_name": "HelloEndpointHandler",
      "semantic_unit_id": "SU-002",
      "responsibility": "Handles GET /hello requests with optional name parameter and returns personalized greeting message.",
      "interfaces": [
        {
          "method": "get_hello",
          "parameters": {
            "name": "Optional[str]"
          },
          "returns": "dict[str, str]",
          "description": "Process hello request with optional name and return greeting message"
        },
        {
          "method": "validate_name_parameter",
          "parameters": {
            "name": "str"
          },
          "returns": "bool",
          "description": "Validate name parameter format and length constraints"
        },
        {
          "method": "format_greeting_message",
          "parameters": {
            "name": "Optional[str]"
          },
          "returns": "str",
          "description": "Format greeting message based on provided name or default to World"
        }
      ],
      "dependencies": [],
      "implementation_notes": "Implement as FastAPI route handler using @app.get('/hello'). Accept name as Query parameter with Query(None, max_length=255). Validate name using regex pattern ^[a-zA-Z0-9 ]*$ to allow only alphanumeric and spaces. Strip whitespace from name input. If name is None or empty string, use 'World' as default. Return dict with 'message' key containing formatted string. Raise HTTPException(status_code=400, detail='...') for validation failures.",
      "complexity": 24
    },
    {
      "component_name": "HealthEndpointHandler",
      "semantic_unit_id": "SU-003",
      "responsibility": "Handles GET /health requests and returns API health status with current UTC timestamp.",
      "interfaces": [
        {
          "method": "get_health",
          "parameters": {},
          "returns": "dict[str, str]",
          "description": "Return health status and current timestamp in ISO 8601 format"
        },
        {
          "method": "get_current_timestamp",
          "parameters": {},
          "returns": "str",
          "description": "Generate current UTC timestamp in ISO 8601 format"
        }
      ],
      "dependencies": [],
      "implementation_notes": "Implement as FastAPI route handler using @app.get('/health'). Use datetime.datetime.utcnow() or datetime.datetime.now(datetime.timezone.utc) to get current time. Format timestamp using isoformat() method to produce ISO 8601 format (e.g., '2024-01-15T10:30:45.123456+00:00'). Always return status='ok' to indicate API is running. Return dict with 'status' and 'timestamp' keys. No parameters required.",
      "complexity": 21
    },
    {
      "component_name": "GlobalExceptionHandler",
      "semantic_unit_id": "SU-004",
      "responsibility": "Handles all exceptions globally and returns properly formatted error responses with appropriate HTTP status codes.",
      "interfaces": [
        {
          "method": "handle_http_exception",
          "parameters": {
            "request": "Request",
            "exc": "HTTPException"
          },
          "returns": "JSONResponse",
          "description": "Handle HTTPException and return formatted error response"
        },
        {
          "method": "handle_validation_error",
          "parameters": {
            "request": "Request",
            "exc": "RequestValidationError"
          },
          "returns": "JSONResponse",
          "description": "Handle request validation errors and return 400 response"
        },
        {
          "method": "handle_generic_exception",
          "parameters": {
            "request": "Request",
            "exc": "Exception"
          },
          "returns": "JSONResponse",
          "description": "Handle unexpected exceptions and return 500 response"
        },
        {
          "method": "format_error_response",
          "parameters": {
            "status_code": "int",
            "error_code": "str",
            "message": "str"
          },
          "returns": "dict[str, Any]",
          "description": "Format error response with consistent structure"
        }
      ],
      "dependencies": [],
      "implementation_notes": "Register exception handlers using @app.exception_handler(ExceptionType) decorator. For HTTPException: extract status_code and detail, return JSONResponse with status_code and formatted error dict. For RequestValidationError: return 400 status with error_code='VALIDATION_ERROR' and message from validation error details. For generic Exception: log error with logging module at ERROR level, return 500 status with error_code='INTERNAL_SERVER_ERROR'. Error response format: {\"error_code\": \"CODE\", \"message\": \"description\"}. Never expose internal error details in 500 responses.",
      "complexity": 27
    }
  ],
  "design_review_checklist": [
    {
      "category": "Architecture",
      "description": "Verify FastAPI application is properly initialized with all required middleware and exception handlers",
      "validation_criteria": "FastAPIApplicationFactory.create_app() must return configured FastAPI instance with CORS middleware, exception handlers registered, and JSON encoding configured. Application must start without errors.",
      "severity": "Critical"
    },
    {
      "category": "Error Handling",
      "description": "Verify all error cases return appropriate HTTP status codes and formatted error responses",
      "validation_criteria": "Invalid name parameter must return 400 with error_code='INVALID_NAME_PARAMETER'. Name exceeding 255 chars must return 400 with error_code='NAME_TOO_LONG'. Unexpected errors must return 500 with error_code='INTERNAL_SERVER_ERROR'. All error responses must include 'error_code' and 'message' fields.",
      "severity": "Critical"
    },
    {
      "category": "Security",
      "description": "Verify input validation prevents injection attacks and malformed data",
      "validation_criteria": "Name parameter must be validated with regex pattern ^[a-zA-Z0-9 ]*$ to allow only alphanumeric and spaces. Name length must be enforced at 255 character maximum. Whitespace must be stripped from input. No raw user input should be directly interpolated into responses.",
      "severity": "High"
    },
    {
      "category": "Performance",
      "description": "Verify endpoints respond quickly without unnecessary processing",
      "validation_criteria": "/hello endpoint must complete in under 100ms. /health endpoint must complete in under 50ms. No blocking I/O operations in request handlers. Timestamp generation must use efficient datetime methods.",
      "severity": "Medium"
    },
    {
      "category": "Data Integrity",
      "description": "Verify response schemas match API contract specifications exactly",
      "validation_criteria": "/hello response must contain only 'message' key with string value. /health response must contain 'status' (value='ok') and 'timestamp' (ISO 8601 format) keys. Timestamp must be in UTC timezone. No additional fields in responses.",
      "severity": "High"
    },
    {
      "category": "Error Handling",
      "description": "Verify exception handlers log errors appropriately without exposing sensitive information",
      "validation_criteria": "Generic exceptions must be logged at ERROR level with full traceback. 500 error responses must NOT include internal error details. HTTPException details must be preserved in response. Logging must use Python logging module.",
      "severity": "High"
    }
  ],
  "architecture_overview": "Minimal three-layer REST API architecture using FastAPI framework. Application layer (FastAPIApplicationFactory) initializes and configures the FastAPI application with middleware and exception handlers. Endpoint layer (HelloEndpointHandler, HealthEndpointHandler) handles HTTP requests with input validation and response formatting. Error handling layer (GlobalExceptionHandler) provides centralized exception handling with consistent error response formatting. No database or external service dependencies. All responses are JSON formatted. CORS middleware enables cross-origin requests for development.",
  "technology_stack": {
    "language": "Python 3.12",
    "framework": "FastAPI 0.104.1",
    "asgi_server": "Uvicorn 0.24.0",
    "datetime_handling": "Python datetime module (stdlib)",
    "validation": "Pydantic v2 (included with FastAPI)",
    "logging": "Python logging module (stdlib)",
    "cors": "FastAPI CORSMiddleware (included)"
  },
  "assumptions": [
    "FastAPI and Uvicorn are installed and available in the Python environment",
    "Application runs on localhost:8000 by default (configurable via Uvicorn)",
    "HTTPS/TLS is handled at infrastructure level (reverse proxy or load balancer)",
    "Name parameter should only contain alphanumeric characters and spaces (no special characters)",
    "All timestamps are in UTC timezone and formatted as ISO 8601 strings",
    "No database persistence is required for this minimal API",
    "CORS is enabled for all origins in development (should be restricted in production)",
    "Logging output goes to stdout/stderr (configurable via logging configuration)",
    "Request validation errors from Pydantic should be caught and formatted consistently"
  ],
  "timestamp": "2025-12-02T22:28:38.951166"
}