{
  "task_id": "HW-001",
  "api_contracts": [
    {
      "endpoint": "/hello",
      "method": "GET",
      "description": "Returns a greeting message with optional personalization via name parameter",
      "request_schema": null,
      "request_params": {
        "name": "string (optional, query parameter, max 100 chars, alphanumeric and spaces only)"
      },
      "response_schema": {
        "message": "string (greeting message)"
      },
      "error_responses": [
        {
          "status": 400,
          "code": "INVALID_NAME",
          "message": "Name parameter contains invalid characters or exceeds 100 characters"
        },
        {
          "status": 500,
          "code": "INTERNAL_ERROR",
          "message": "Internal server error"
        }
      ],
      "authentication_required": false,
      "rate_limit": null
    },
    {
      "endpoint": "/health",
      "method": "GET",
      "description": "Returns application health status and current timestamp",
      "request_schema": null,
      "request_params": null,
      "response_schema": {
        "status": "string (always 'ok')",
        "timestamp": "string (ISO 8601 UTC timestamp)"
      },
      "error_responses": [
        {
          "status": 500,
          "code": "INTERNAL_ERROR",
          "message": "Internal server error"
        }
      ],
      "authentication_required": false,
      "rate_limit": null
    }
  ],
  "data_schemas": [],
  "component_logic": [
    {
      "component_name": "FastAPIApplication",
      "semantic_unit_id": "SU-001",
      "responsibility": "Initializes and configures the FastAPI application instance with middleware and error handlers",
      "interfaces": [
        {
          "method": "create_app",
          "parameters": {},
          "returns": "FastAPI",
          "description": "Create and configure FastAPI application instance"
        },
        {
          "method": "setup_error_handlers",
          "parameters": {
            "app": "FastAPI"
          },
          "returns": "None",
          "description": "Configure global exception handlers for the application"
        }
      ],
      "dependencies": [],
      "implementation_notes": "Create FastAPI instance with title='Hello World API', version='1.0.0', description='Minimal REST API with hello and health endpoints'. Add global exception handler for unhandled exceptions that returns 500 status with generic error message. Use uvicorn as ASGI server.",
      "complexity": 11
    },
    {
      "component_name": "HelloEndpoint",
      "semantic_unit_id": "SU-002",
      "responsibility": "Handles GET /hello requests with optional name parameter and returns personalized greeting",
      "interfaces": [
        {
          "method": "get_hello",
          "parameters": {
            "name": "Optional[str]"
          },
          "returns": "dict[str, str]",
          "description": "Return greeting message, personalized if name provided"
        },
        {
          "method": "validate_name",
          "parameters": {
            "name": "str"
          },
          "returns": "bool",
          "description": "Validate name parameter contains only alphanumeric characters and spaces"
        },
        {
          "method": "sanitize_name",
          "parameters": {
            "name": "str"
          },
          "returns": "str",
          "description": "Trim whitespace and ensure proper capitalization"
        }
      ],
      "dependencies": [],
      "implementation_notes": "Use FastAPI Query parameter with default None for optional name. Validate name with regex pattern '^[a-zA-Z0-9\\s]+$' and max length 100. Sanitize by stripping whitespace and title-casing. Return {'message': f'Hello, {name}!'} if name provided, else {'message': 'Hello, World!'}. Raise HTTPException(400) for invalid names.",
      "complexity": 19
    },
    {
      "component_name": "HealthEndpoint",
      "semantic_unit_id": "SU-003",
      "responsibility": "Handles GET /health requests and returns application status with current timestamp",
      "interfaces": [
        {
          "method": "get_health",
          "parameters": {},
          "returns": "dict[str, str]",
          "description": "Return health status and current UTC timestamp"
        },
        {
          "method": "get_current_timestamp",
          "parameters": {},
          "returns": "str",
          "description": "Get current UTC timestamp in ISO 8601 format"
        }
      ],
      "dependencies": [],
      "implementation_notes": "Use datetime.utcnow().isoformat() + 'Z' for timestamp generation. Always return {'status': 'ok', 'timestamp': <iso_timestamp>}. No validation needed as endpoint takes no parameters. Use @app.get('/health') decorator.",
      "complexity": 12
    },
    {
      "component_name": "ErrorHandler",
      "semantic_unit_id": "SU-004",
      "responsibility": "Provides centralized error handling and HTTP status code management for all endpoints",
      "interfaces": [
        {
          "method": "handle_validation_error",
          "parameters": {
            "request": "Request",
            "exc": "RequestValidationError"
          },
          "returns": "JSONResponse",
          "description": "Handle FastAPI validation errors and return 400 status"
        },
        {
          "method": "handle_http_exception",
          "parameters": {
            "request": "Request",
            "exc": "HTTPException"
          },
          "returns": "JSONResponse",
          "description": "Handle HTTP exceptions with proper status codes"
        },
        {
          "method": "handle_general_exception",
          "parameters": {
            "request": "Request",
            "exc": "Exception"
          },
          "returns": "JSONResponse",
          "description": "Handle unexpected exceptions and return 500 status"
        }
      ],
      "dependencies": [],
      "implementation_notes": "Register exception handlers using @app.exception_handler decorators. For RequestValidationError, return 400 with INVALID_REQUEST code. For HTTPException, pass through status and detail. For general Exception, log error and return 500 with INTERNAL_ERROR code. All responses use consistent JSON format: {'error': {'code': 'ERROR_CODE', 'message': 'Error message'}}.",
      "complexity": 22
    }
  ],
  "design_review_checklist": [
    {
      "category": "Security",
      "description": "Verify input validation prevents injection attacks and malformed data",
      "validation_criteria": "HelloEndpoint must validate name parameter with regex pattern '^[a-zA-Z0-9\\s]+$' and max length 100. No SQL injection risk as no database used.",
      "severity": "High"
    },
    {
      "category": "Error Handling",
      "description": "Verify all endpoints return appropriate HTTP status codes and error responses",
      "validation_criteria": "API contracts must define error responses for each endpoint. ErrorHandler must handle RequestValidationError (400), HTTPException (pass-through), and general Exception (500).",
      "severity": "Critical"
    },
    {
      "category": "Architecture",
      "description": "Verify proper separation of concerns between endpoints and error handling",
      "validation_criteria": "Each endpoint (HelloEndpoint, HealthEndpoint) must be separate components. ErrorHandler must be centralized component handling all error types.",
      "severity": "Medium"
    },
    {
      "category": "Data Integrity",
      "description": "Verify timestamp format consistency and timezone handling",
      "validation_criteria": "HealthEndpoint must use datetime.utcnow().isoformat() + 'Z' for consistent ISO 8601 UTC timestamps.",
      "severity": "Medium"
    },
    {
      "category": "Performance",
      "description": "Verify no unnecessary processing or resource usage in simple endpoints",
      "validation_criteria": "HelloEndpoint and HealthEndpoint must have minimal processing. No database connections, file I/O, or external API calls.",
      "severity": "Low"
    },
    {
      "category": "Error Handling",
      "description": "Verify error responses follow consistent JSON structure",
      "validation_criteria": "All error responses must use format: {'error': {'code': 'ERROR_CODE', 'message': 'Error message'}}. Success responses use documented schema.",
      "severity": "High"
    }
  ],
  "architecture_overview": "Simple REST API built with FastAPI framework using a modular component architecture. FastAPIApplication handles app initialization and configuration. HelloEndpoint and HealthEndpoint are separate components handling their respective routes with input validation and business logic. ErrorHandler provides centralized exception handling with consistent error response formatting. No database or external dependencies required - pure in-memory processing with stateless endpoints.",
  "technology_stack": {
    "language": "Python 3.12",
    "web_framework": "FastAPI 0.104+",
    "asgi_server": "uvicorn 0.24+",
    "validation": "pydantic (included with FastAPI)",
    "datetime_handling": "Python datetime module (stdlib)",
    "regex_validation": "Python re module (stdlib)"
  },
  "assumptions": [
    "Application runs as single instance (no clustering or load balancing)",
    "No persistent storage required (stateless endpoints)",
    "Name parameter validation allows alphanumeric characters and spaces only",
    "Health endpoint always returns 'ok' status (no actual health checks)",
    "Error messages can be returned in English only",
    "No authentication or rate limiting required",
    "Application runs in UTC timezone for timestamp generation"
  ],
  "timestamp": "2025-11-21T03:00:59.234703"
}