{
  "task_id": "HW-001",
  "api_contracts": [
    {
      "endpoint": "/hello",
      "method": "GET",
      "description": "Returns a greeting message with optional personalization via name parameter",
      "request_schema": null,
      "request_params": {
        "name": "string (optional, query parameter, max 100 chars, alphanumeric and spaces only)"
      },
      "response_schema": {
        "message": "string (greeting message)"
      },
      "error_responses": [
        {
          "status": 400,
          "code": "INVALID_NAME",
          "message": "Name parameter contains invalid characters or exceeds 100 characters"
        },
        {
          "status": 500,
          "code": "INTERNAL_ERROR",
          "message": "Internal server error"
        }
      ],
      "authentication_required": false,
      "rate_limit": null
    },
    {
      "endpoint": "/health",
      "method": "GET",
      "description": "Returns application health status and current timestamp",
      "request_schema": null,
      "request_params": null,
      "response_schema": {
        "status": "string (always 'ok')",
        "timestamp": "string (ISO 8601 UTC timestamp)"
      },
      "error_responses": [
        {
          "status": 500,
          "code": "INTERNAL_ERROR",
          "message": "Internal server error"
        }
      ],
      "authentication_required": false,
      "rate_limit": null
    }
  ],
  "data_schemas": [],
  "component_logic": [
    {
      "component_name": "FastAPIApplication",
      "semantic_unit_id": "SU-001",
      "responsibility": "Initializes and configures the FastAPI application instance with middleware and error handlers",
      "interfaces": [
        {
          "method": "create_app",
          "parameters": {},
          "returns": "FastAPI",
          "description": "Create and configure FastAPI application instance"
        },
        {
          "method": "setup_error_handlers",
          "parameters": {
            "app": "FastAPI"
          },
          "returns": "None",
          "description": "Configure global exception handlers for the application"
        }
      ],
      "dependencies": [],
      "implementation_notes": "Create FastAPI instance with title='Hello World API', version='1.0.0', description='Minimal REST API with hello and health endpoints'. Add global exception handler for unhandled exceptions returning 500 status. Configure CORS middleware if needed. Set up JSON response formatting.",
      "complexity": 11
    },
    {
      "component_name": "HelloEndpoint",
      "semantic_unit_id": "SU-002",
      "responsibility": "Handles GET /hello requests with optional name parameter and returns personalized greeting",
      "interfaces": [
        {
          "method": "get_hello",
          "parameters": {
            "name": "Optional[str]"
          },
          "returns": "dict[str, str]",
          "description": "Return greeting message, personalized if name provided"
        },
        {
          "method": "validate_name",
          "parameters": {
            "name": "str"
          },
          "returns": "bool",
          "description": "Validate name parameter contains only alphanumeric characters and spaces"
        },
        {
          "method": "sanitize_name",
          "parameters": {
            "name": "str"
          },
          "returns": "str",
          "description": "Clean and format name parameter for safe usage"
        }
      ],
      "dependencies": [],
      "implementation_notes": "Use FastAPI Query parameter with default None for optional name. Validate name length <= 100 chars and contains only alphanumeric chars, spaces, hyphens, apostrophes. Strip whitespace and title-case the name. Return {'message': f'Hello, {name}!'} if name provided, else {'message': 'Hello, World!'}. Raise HTTPException(400) for invalid names.",
      "complexity": 19
    },
    {
      "component_name": "HealthEndpoint",
      "semantic_unit_id": "SU-003",
      "responsibility": "Handles GET /health requests and returns application status with current timestamp",
      "interfaces": [
        {
          "method": "get_health",
          "parameters": {},
          "returns": "dict[str, str]",
          "description": "Return health status and current UTC timestamp"
        },
        {
          "method": "get_current_timestamp",
          "parameters": {},
          "returns": "str",
          "description": "Generate ISO 8601 formatted UTC timestamp"
        }
      ],
      "dependencies": [],
      "implementation_notes": "Use datetime.utcnow().isoformat() + 'Z' for timestamp generation. Always return status='ok' (this is a simple health check, not monitoring external dependencies). Return {'status': 'ok', 'timestamp': timestamp_string}. Use UTC timezone consistently.",
      "complexity": 12
    },
    {
      "component_name": "ErrorHandler",
      "semantic_unit_id": "SU-004",
      "responsibility": "Provides centralized error handling and HTTP status code management for all endpoints",
      "interfaces": [
        {
          "method": "handle_validation_error",
          "parameters": {
            "request": "Request",
            "exc": "RequestValidationError"
          },
          "returns": "JSONResponse",
          "description": "Handle FastAPI validation errors and return 400 status"
        },
        {
          "method": "handle_http_exception",
          "parameters": {
            "request": "Request",
            "exc": "HTTPException"
          },
          "returns": "JSONResponse",
          "description": "Handle HTTP exceptions and return appropriate status codes"
        },
        {
          "method": "handle_general_exception",
          "parameters": {
            "request": "Request",
            "exc": "Exception"
          },
          "returns": "JSONResponse",
          "description": "Handle unexpected exceptions and return 500 status"
        }
      ],
      "dependencies": [],
      "implementation_notes": "Register exception handlers using @app.exception_handler decorators. For RequestValidationError: return 400 with standardized error format. For HTTPException: pass through status and detail. For general Exception: log error details, return 500 with generic message (don't expose internal details). All error responses use JSON format with 'error' and 'message' fields.",
      "complexity": 22
    }
  ],
  "design_review_checklist": [
    {
      "category": "Security",
      "description": "Verify input validation prevents injection attacks and malformed data",
      "validation_criteria": "HelloEndpoint.validate_name() must restrict name parameter to alphanumeric characters, spaces, hyphens, and apostrophes only. Length must be limited to 100 characters. No SQL injection risk since no database is used.",
      "severity": "High"
    },
    {
      "category": "Error Handling",
      "description": "Verify all endpoints return appropriate HTTP status codes and error messages",
      "validation_criteria": "API contracts must define error responses for each endpoint. ErrorHandler must handle RequestValidationError (400), HTTPException (pass-through), and general Exception (500). No stack traces in production responses.",
      "severity": "Critical"
    },
    {
      "category": "Architecture",
      "description": "Verify proper separation of concerns between endpoint handlers and application setup",
      "validation_criteria": "Each semantic unit must map to a distinct component. HelloEndpoint and HealthEndpoint must be separate from FastAPIApplication. No business logic in application setup code.",
      "severity": "Medium"
    },
    {
      "category": "Data Integrity",
      "description": "Verify timestamp format consistency and timezone handling",
      "validation_criteria": "HealthEndpoint.get_current_timestamp() must return ISO 8601 format with UTC timezone (ending in 'Z'). Use datetime.utcnow() consistently, not datetime.now().",
      "severity": "Medium"
    },
    {
      "category": "Performance",
      "description": "Verify endpoints handle requests efficiently without unnecessary processing",
      "validation_criteria": "Both endpoints must have O(1) complexity. No loops, external API calls, or heavy computations. Name validation must use simple string operations, not regex compilation per request.",
      "severity": "Low"
    },
    {
      "category": "Error Handling",
      "description": "Verify error responses follow consistent JSON format",
      "validation_criteria": "All error responses must use consistent JSON structure with 'error' and 'message' fields. ErrorHandler must standardize error format across all exception types.",
      "severity": "High"
    }
  ],
  "architecture_overview": "Simple 3-layer FastAPI application with endpoint handlers (HelloEndpoint, HealthEndpoint), centralized error handling (ErrorHandler), and application configuration (FastAPIApplication). No database or external dependencies. Stateless design with input validation and proper HTTP status codes. Each endpoint is independently testable and follows single responsibility principle.",
  "technology_stack": {
    "language": "Python 3.12",
    "web_framework": "FastAPI 0.104+",
    "asgi_server": "uvicorn 0.24+",
    "datetime_handling": "Python datetime module (stdlib)",
    "validation": "Pydantic (included with FastAPI)",
    "json_handling": "Python json module (stdlib)"
  },
  "assumptions": [
    "Application runs in single-threaded environment (no concurrency concerns)",
    "No authentication or authorization required for any endpoints",
    "No rate limiting needed for this minimal API",
    "No logging configuration beyond basic error logging",
    "No database or persistent storage required",
    "CORS is not required (same-origin requests only)",
    "Name parameter validation allows common name characters (letters, spaces, hyphens, apostrophes)",
    "Health endpoint always returns 'ok' status (no external dependency checks)"
  ],
  "timestamp": "2025-11-19T22:12:43.755342"
}